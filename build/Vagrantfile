# -*- mode: ruby -*-
# vi: set ft=ruby :


Vagrant.configure("2") do |config|
  # base ubuntu image
  config.vm.box = "ubuntu/xenial64"
  # project name
  config.vm.hostname = "api"
  # project directory
  config.vm.synced_folder "..", "/var/www",
    id: "vagrant-root",
    owner: "vagrant",
    group: "www-data",
    mount_options: ["dmode=775,fmode=664"]
  # setup environment
  config.vm.provision :shell,
    path: "bootstrap.sh"
  # launch services
  config.vm.provision :shell,
    inline: "service apache2 restart",
    run: "always"
  # http forwarding
  config.vm.network :forwarded_port,
    guest: 80,
    host: 8080
end
